{% extends 'base.html' %}
{% block layout %}
{% include 'includes/hero.html' %}
{% block content %}
<content
  x-data="{ mobileSidebarOpen: false, activeTable: null }"
  class="grid grid-cols-12 max-w-7xl mx-auto my-6 px-6"
>
  <mobileSidebarNav
    class="md:hidden col-span-12 md:col-span-1 mx-auto mb-6 z-10 relative"
  >
    <a
      @click="mobileSidebarOpen = !mobileSidebarOpen"
      class="flex items-center cursor-pointer select-none font-bold hover:bg-gray-200 rounded-lg p-3"
    >
      <span>Manage</span>
      <img
        x-bind:class="mobileSidebarOpen && 'rotate-180 duration-300'"
        class="w-4 ml-1.5"
        src="https://img.icons8.com/small/32/000000/expand-arrow.png"
      />
    </a>
  </mobileSidebarNav>
  <main class="col-span-12 md:col-span-8">
    {% if user.is_authenticated %}
    <div
      id="product-table-container"
      class="table-container"
      x-show="activeTable === 'product-table-container'"
      x-cloak
    >
      <div class="progress hidden">Loading...</div>
    </div>
    <div
      id="recipe-table-container"
      class="table-container"
      x-show="activeTable === 'recipe-table-container'"
      x-cloak
    >
      <div class="progress hidden">Loading...</div>
    </div>
    <div
      id="supplier-table-container"
      class="table-container"
      x-show="activeTable === 'supplier-table-container'"
      x-cloak
    >
      <div class="progress hidden">Loading...</div>
    </div>
    <div
      id="ingredient-table-container"
      class="table-container"
      x-show="activeTable === 'ingredient-table-container'"
      x-cloak
    >
      <div class="progress hidden">Loading...</div>
    </div>
    {% endif %}
  </main>

  {% include 'management/suppliers/sidebar.html' %}
</content>

<script>
  function loadTable(targetId) {
    // Use the custom attribute to trigger the request
    document.querySelector('[hx-trigger-click][hx-target="' + targetId + '"]').click();
  }

  // Load the Product List table by default
  loadTable('product-table-container');
</script>

{% endblock %}
{% endblock %}
